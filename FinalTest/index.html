<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <script src="../js/jquery-3.6.4.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <title>Document</title>
    <script>
        function check_Serial(){
            var serial = document.getElementById("txt_serial").value;
            var check_error_serial  = document.getElementById("error_serial");
            var regex_serial = /^([A-Z0-9_]{6,})$/;
            if(!regex_serial.test(serial)){
                check_error_serial.innerHTML = "Không hợp lệ!";
            }
            else{
                check_error_serial.innerHTML = "";
                return serial;
            }
        }
        function check_Mota(){
            var mota = document.getElementById("txt_mota").value;
            var check_error_mota  = document.getElementById("error_mota");
            // var regex_mota = /^([0-9]{6,})$/;
            if(mota == "" || mota == null){
                check_error_mota.innerHTML = "Không được bỏ trống!";
            }
            else{
                check_error_mota.innerHTML = "";
                return mota;
            }
        }
        function check_Trongluong(){
            var trongluong = document.getElementById("txt_trongluong").value;
            var check_error_trongluong  = document.getElementById("error_trongluong");
            var regex_trongluong = /^[0-9]*\.?[0-9]+$/;
            if(trongluong == "" || trongluong == null){
                check_error_trongluong.innerHTML = "Không được bỏ trống!";
            } else if(!regex_trongluong.test(trongluong)){
                check_error_trongluong.innerHTML = "Không hợp lệ!";
            }
            else{
                check_error_trongluong.innerHTML = "";
                return trongluong;
            }
        }

        function tinh_tien_van_chuyen() {
  var trong_luong = parseFloat(document.getElementById("txt_trongluong").value);
  var tien_van_chuyen = document.getElementById("txt_tien");
  
  if (isNaN(trong_luong) || trong_luong <= 0) {
    tien_van_chuyen.value = "";
    return;
  }
  
  var phi_van_chuyen;
  if (trong_luong <= 20) {
    phi_van_chuyen = 35000;
  } else if (trong_luong <= 50) {
    phi_van_chuyen = 30000;
  } else {
    phi_van_chuyen = 25000;
  }
  
  tien_van_chuyen.value = phi_van_chuyen * trong_luong;
}

        // function chiphivanchuyen(){
        //     var trongluong = document.getElementById("txt_trongluong").vaslue;
        //     var kg = document.querySelector("#txt_trongluong");
        //     var tienship = document.querySelector("#txt_tien");

        //     kg.addEventListener("change", function() {
        //         if(trongluong>0 && trongluong<=20)
        //         {
        //             tienship.value = trongluong*35000;
        //         }
        //         else if(trongluong>20 && trongluong<=50)
        //         {
        //             tienship.value = trongluong*30000;
        //         }
        //         else
        //         {
        //             tienship.value = trongluong*35000;
        //         }

        //     });
        // }

        // function check_Trongluong(){
        //     var trongluong = document.getElementById("txt_trongluong").value;
        //     var check_error_trongluong  = document.getElementById("check_error_trongluong");
        //     var regex_trongluong = /^([0-9])$/;
        //     if(trongluong == "" || trongluong == null){
        //         check_error_trongluong.innerHTML = "Không được bỏ trống!";
        //     }else if(!regex_trongluong.test(trongluong) || trongluong < 0){
        //         check_error_trongluong.innerHTML = "Không hợp lệ!";
        //     }
        //     else{
        //         check_error_trongluong.innerHTML = "";
        //         return trongluong;
        //     }
        // }
        
        var i=0;
        function insertTable(){
            var serial = document.getElementById("txt_serial").value;
            var mota = document.getElementById("txt_mota").value;
            var hinhanh = document.getElementById("txt_image").value;
            var trongluong = document.getElementById("txt_trongluong").value;
            var tienship = document.getElementById("txt_tien").value;

            var table = document.getElementById("tbl");
            var row = table.insertRow(-1);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);
            var cell5 = row.insertCell(4);
            var cell6 = row.insertCell(5);

            cell1.innerHTML = ++i;
            cell2.innerHTML = serial;
            cell3.innerHTML = mota;
            cell4.innerHTML = '<img src="' + hinhanh + '" width="200">';
            cell5.innerHTML = trongluong;
            cell6.innerHTML =tienship;
            
            
            

        }
        
    </script>
</head>
<body>
    <div class="container">
        <div class="row badge-warning align-items-center pt-2 pb-2">
            <div class="col-4">
                <img src="../FinalTest/img/logo7.png" alt="Logo" style="width: 100%;">
            </div>
            <div class="col-8">
                <div class="navbar">
                    <div class="nav">
                        <ul class="nav">
                            <li class="nav-item">
                                <a href="" class="nav-link">Trang chủ</a>
                            </li>
                            <li class="nav-item">
                                <a href="" class="nav-link">Giới thiệu</a>
                            </li>
                            <li class="nav-item">
                                <a href="" class="nav-link">Dịch vụ</a>
                            </li>
                            <li class="nav-item">
                                <a href="" class="nav-link" data-toggle="modal" data-target="#mymodal">Ký gửi hàng hóa</a>
                            </li>
                            <li class="nav-item">
                                <a href="" class="nav-link">Liên hệ</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="row border ">
            <div class="col-8 pt-2">
                Form
            </div>
            <div class="col-4 border pt-2">
                <h4>Qui định thanh toán</h4>
                <ul>
                    <li>Khách hàng cọ từ 70%-100% số tiền của đơn hàng.</li>
                    <li>Hàng về sau 24-48 tiếng kể từ khi kho Trung Quốc ký nhận.</li>
                    <li>Shop sẽ than lý đơn hàng nếu sau 1 tuần khách hàng không thanh toán tiền nhận hàng.</li>
                </ul>
            </div>
        </div>

        <div class="row border">
            <div class="col-12 mt-2 text-primary mb-2">
                <h4>Danh sách kiện hàng hóa gửi</h4>
            </div>
            <div class="col-12">
                <table class="table table-bordered" id="tbl">
                    <tr>
                        <th>STT</th>
                        <th>Số serial</th>
                        <th>Mô tả kiện hàng</th>
                        <th>Hình ảnh</th>
                        <th>Trọng lượng (kg)</th>
                        <th>Phí vận chuyển(VND)</th>
                    </tr>
                </table>
            </div>
        </div>
        <div class="row">
            <div class="col-12 text-primary text-center bg-warning p-2">
                <h6>Nguyễn Tấn Thiên - 21119761</h6>
            </div>
        </div>
    </div>

    <!-- modal  -->
    <div class="modal fade" id="mymodal">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h4>Thông tin kiện hàng hóa gửi</h4>
                    <button type="button" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body">
                    <form action="">
                        <div class="form-group">
                            <div class="row">
                                <div class="col-4">
                                    <label for="">Số serial</label>
                                </div>
                                <div class="col-8">
                                    <input type="text" name="txt_serial" id="txt_serial" onblur="check_Serial();" class="form-control">
                                    <label for="" class="text-danger" id="error_serial">Số serial in trên kiện hàng nếu có</label>
                                </div>
                            </div>
                        </div>
                    </form>
                    <form action="">
                        <div class="form-group">
                            <div class="row">
                                <div class="col-4">
                                    <label for="">Mô tả kiện hàng:</label>
                                </div>
                                <div class="col-8">
                                    <input type="text" name="txt_mota" id="txt_mota" onblur="check_Mota();" class="form-control">
                                    <label for="" class="text-danger" id="error_mota">*</label>
                                </div>
                            </div>
                        </div>
                    </form>
                    <form action="">
                        <div class="form-group">
                            <div class="row">
                                <div class="col-4">
                                    <label for="">Hình ảnh:</label>
                                </div>
                                <div class="col-8">
                                   <input type="file" name="txt_image" id="txt_image">
                                    <label for="" class="text-danger" id="error_image"></label>
                                </div>
                            </div>
                        </div>
                    </form>
                    <form action="">
                        <div class="form-group">
                            <div class="row">
                                <div class="col-4">
                                    <label for="">Trọng lượng (kg):</label>
                                </div>
                                <div class="col-8">
                                    <input type="text" name="txt_trongluong" id="txt_trongluong" onchange="tinh_tien_van_chuyen()" onblur="check_Trongluong();" class="form-control">
                                    <label for="" class="text-danger" id="error_trongluong">*</label>
                                </div>
                            </div>
                        </div>
                    </form>
                    <form action="">
                        <div class="form-group">
                            <div class="row">
                                <div class="col-4">
                                    <label for="">Chi phí vận chuyển (VND):</label>
                                </div>
                                <div class="col-8">
                                    <input type="text" name="txt_tien" id="txt_tien" class="form-control" readonly>
                                    <label for="" class="text-danger" id="error_tien"></label>
                                </div>
                            </div>
                        </div>
                    </form>
                    <input type="button" value="Xác nhận" onclick="insertTable()" class="btn btn-primary">
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>
</body>
</html>